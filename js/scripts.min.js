var pinData={morning:{card:[{name:"General",text:"The activities of contemporary city life still largely resemble those of previous generations: commuting, shopping and dining out. However, there are now a variety of public safety devices and tools in place that help to make cities safer, smarter, more efficient, and more livable. Hitachi Visualization combines data from these devices to provide city officials, law enforcement, and transportation departments with a unified picture of a city in motion."},{name:"public transit",text:"The morning commute is improved when a city can monitor its public transit systems and streamline operations. With the ability to identify equipment malfunctions, safety hazards, and scheduled disruptions, transit officials can address issues faster than ever before, making rush hour a little more manageable for millions of residents."}],className:"morning"},noon:{card:[{name:"traffic cameras",text:"Traffic cameras monitor the flow of traffic, alerting city officials when there’s a need to dispatch resources to shift traffic patterns."},{name:"crowd control",text:"Modern law enforcement departments are able to integrate real-time information from public data, like social media feeds, to detect danger among crowds. Though most impromptu public gatherings are positive for the community and pose no threat, in the event that danger arises, authorities are well positioned to assess and respond quickly."}],className:"noon"},evening:{card:[{name:"lisence plate readers",text:"License plate readers allow cities to monitor their streets and ensure reckless drivers are disciplined. The tool can also offer key evidence at accident sites."},{name:"weather plugin",text:"Cities can also factor irregular weather patterns into their decision-making, to prepare and dispatch officials to areas that might be particularly vulnerable during storms, as well as monitor for weather-related hazards that might result in unsafe conditions for residents."}],className:"evening"},night:{card:[{name:"Predictive crime analytics",text:"The future of law enforcement requires the ability to not only combine data from various inputs, but to compile that data into valuable insights. With more advanced data analytics, public safety officials can forecast where crimes are likely to occur and more effectively allocate resources in those areas. In some cases, crimes may even be prevented from happening in the first place—making cities safer for us all."},{name:"Private surveillance systems",text:"Hitachi also helps law enforcement agencies to partner with private businesses in helping to deter and solve crimes faster. Through these Public-Private Partnerships, businesses provide law enforcement with access to certain camera feeds, giving them a rapid and more complete picture into crime scenes. In addition, gunshot detection technology can be used in tandem with these cameras to capture relevant footage immediately following an incident."}],className:"night"}},daySounds={morning:"./images/morning.mp3",noon:"./images/noon.mp3",evening:"./images/evening.mp3",night:"./images/night.mp3"},App=function(){var a=this,b="morning",c={},d=!1,e=!1,f='<audio id="street-noise" loop>                             <source src="./images/morning.mp3" type="audio/mp3"></source>   							Your browser does not support audio.   						</audio>',g='<audio id="pin-noise">                             <source src="./images/pin-ding.mp3" type="audio/mp3""></source>                             Your browser does not support audio.                         </audio>';this.on=function(){$("#qzad").addClass("qzad"),tmpl.arg="pinData",this.render("#content-cards","pin-template",pinData),h(),i()},this.render=function(a,b,c){$(a).html(tmpl(b,c))};var h=function(){$(".audio").on("click",function(){var c;if(!d){d=!0,e=!0,$(".qzad").append(f),$(".qzad").append(g);var h=$("#street-noise"),i=daySounds[b];h.attr("src",i),h[0].load(),h[0].play()}$(".audio").toggleClass("off"),$(".audio").hasClass("off")?($("#pin-noise")[0].pause(),$("#street-noise")[0].pause(),e=!1,c="off"):($("#street-noise")[0].play(),e=!0,c="on"),a.track.trackInteraction("audio turned "+c)}),$(".pin").on("click",function(b){c.time=b.target.id.split("-")[0],c.number=parseInt(b.target.id.split("-")[1]);var d,f=$(".card-"+c.time+"-"+c.number);if(f.hasClass("hide")){if($(".pin-card").addClass("hide"),$(".card-"+c.time+"-"+c.number).removeClass("hide"),e){var g=$("#pin-noise"),h="./images/pin-ding.mp3";g.attr("src",h),g[0].load(),g[0].play()}d="opened"}else f.addClass("hide"),d="closed";}),$(".x").on("click",function(){$(this).parent().addClass("hide");var b=$(this).parent().attr("class").split(" ")[1];})},i=function(){$("input").rangeslider({polyfill:!1,onInit:function(){$('input[type="range"]').val(0).change(),$(".rangeslider__handle").addClass("morning"),$(".content-cards .morning").removeClass("hide")},onSlide:function(a,b){},onSlideEnd:function(c,d){.5>=d?($('input[type="range"]').val(0).change(),b="morning"):1.5>=d?($('input[type="range"]').val(1).change(),b="noon"):2.5>=d?($('input[type="range"]').val(2).change(),b="evening"):($('input[type="range"]').val(3).change(),b="night"),$(".pin-card").addClass("hide"),$(".card").addClass("hide"),$("."+b).removeClass("hide"),$(".rangeslider__handle").removeClass("morning noon evening night").addClass(b);var f=$("#street-noise"),g=daySounds[b];f.attr("src",g),f[0]&&f[0].load(),e&&f[0].play()}})}};
!function(a){"use strict";var b=function(a,c){var d=/[^\w\-\.:]/.test(a)?new Function(b.arg+",tmpl","var _e=tmpl.encode"+b.helper+",_s='"+a.replace(b.regexp,b.func)+"';return _s;"):b.cache[a]=b.cache[a]||b(b.load(a));return c?d(c,b):function(a){return d(a,b)}};b.cache={},b.load=function(a){return document.getElementById(a).innerHTML},b.regexp=/([\s'\\])(?!(?:[^{]|\{(?!%))*%\})|(?:\{%(=|#)([\s\S]+?)%\})|(\{%)|(%\})/g,b.func=function(a,b,c,d,e,f){return b?{"\n":"\\n","\r":"\\r","	":"\\t"," ":" "}[b]||"\\"+b:c?"="===c?"'+_e("+d+")+'":"'+("+d+"==null?'':"+d+")+'":e?"';":f?"_s+='":void 0},b.encReg=/[<>&"'\x00]/g,b.encMap={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;"},b.encode=function(a){return(null==a?"":""+a).replace(b.encReg,function(a){return b.encMap[a]||""})},b.arg="o",b.helper=",print=function(s,e){_s+=e?(s==null?'':s):_e(s);},include=function(s,d){_s+=tmpl(s,d);}","function"==typeof define&&define.amd?define(function(){return b}):a.tmpl=b}(this);
/*! rangeslider.js - v1.2.1 | (c) 2015 @andreruffert | MIT license | https://github.com/andreruffert/rangeslider.js */
!function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){"use strict";function b(){var a=document.createElement("input");return a.setAttribute("type","range"),"text"!==a.type}function c(a,b){var c=Array.prototype.slice.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)}function d(a,b){return b=b||100,function(){if(!a.debouncing){var c=Array.prototype.slice.apply(arguments);a.lastReturnVal=a.apply(window,c),a.debouncing=!0}return clearTimeout(a.debounceTimeout),a.debounceTimeout=setTimeout(function(){a.debouncing=!1},b),a.lastReturnVal}}function e(a){return a&&(0===a.offsetWidth||0===a.offsetHeight||a.open===!1)}function f(a){for(var b=[],c=a.parentNode;e(c);)b.push(c),c=c.parentNode;return b}function g(a,b){function c(a){"undefined"!=typeof a.open&&(a.open=a.open?!1:!0)}var d=f(a),e=d.length,g=[],h=a[b];if(e){for(var i=0;e>i;i++)g[i]=d[i].style.cssText,d[i].style.display="block",d[i].style.height="0",d[i].style.overflow="hidden",d[i].style.visibility="hidden",c(d[i]);h=a[b];for(var j=0;e>j;j++)d[j].style.cssText=g[j],c(d[j])}return h}function h(b,e){if(this.$window=a(window),this.$document=a(document),this.$element=a(b),this.options=a.extend({},l,e),this.polyfill=this.options.polyfill,this.onInit=this.options.onInit,this.onSlide=this.options.onSlide,this.onSlideEnd=this.options.onSlideEnd,this.polyfill&&k)return!1;this.identifier="js-"+i+"-"+j++,this.startEvent=this.options.startEvent.join("."+this.identifier+" ")+"."+this.identifier,this.moveEvent=this.options.moveEvent.join("."+this.identifier+" ")+"."+this.identifier,this.endEvent=this.options.endEvent.join("."+this.identifier+" ")+"."+this.identifier,this.toFixed=(this.step+"").replace(".","").length-1,this.$fill=a('<div class="'+this.options.fillClass+'" />'),this.$handle=a('<div class="'+this.options.handleClass+'" />'),this.$range=a('<div class="'+this.options.rangeClass+'" id="'+this.identifier+'" />').insertAfter(this.$element).prepend(this.$fill,this.$handle),this.$element.css({position:"absolute",width:"1px",height:"1px",overflow:"hidden",opacity:"0"}),this.handleDown=a.proxy(this.handleDown,this),this.handleMove=a.proxy(this.handleMove,this),this.handleEnd=a.proxy(this.handleEnd,this),this.init();var f=this;this.$window.on("resize."+this.identifier,d(function(){c(function(){f.update()},300)},20)),this.$document.on(this.startEvent,"#"+this.identifier+":not(."+this.options.disabledClass+")",this.handleDown),this.$element.on("change."+this.identifier,function(a,b){if(!b||b.origin!==f.identifier){var c=a.target.value,d=f.getPositionFromValue(c);f.setPosition(d)}})}var i="rangeslider",j=0,k=b(),l={polyfill:!0,rangeClass:"rangeslider",disabledClass:"rangeslider--disabled",fillClass:"rangeslider__fill",handleClass:"rangeslider__handle",startEvent:["mousedown","touchstart","pointerdown"],moveEvent:["mousemove","touchmove","pointermove"],endEvent:["mouseup","touchend","pointerup"]};h.prototype.init=function(){this.update(!0),this.$element[0].value=this.value,this.onInit&&"function"==typeof this.onInit&&this.onInit()},h.prototype.update=function(a){a=a||!1,a&&(this.min=parseFloat(this.$element[0].getAttribute("min")||0),this.max=parseFloat(this.$element[0].getAttribute("max")||100),this.value=parseFloat(this.$element[0].value||this.min+(this.max-this.min)/2),this.step=parseFloat(this.$element[0].getAttribute("step")||1)),this.handleWidth=g(this.$handle[0],"offsetWidth"),this.rangeWidth=g(this.$range[0],"offsetWidth"),this.maxHandleX=this.rangeWidth-this.handleWidth,this.grabX=this.handleWidth/2,this.position=this.getPositionFromValue(this.value),this.$element[0].disabled?this.$range.addClass(this.options.disabledClass):this.$range.removeClass(this.options.disabledClass),this.setPosition(this.position)},h.prototype.handleDown=function(a){if(a.preventDefault(),this.$document.on(this.moveEvent,this.handleMove),this.$document.on(this.endEvent,this.handleEnd),!((" "+a.target.className+" ").replace(/[\n\t]/g," ").indexOf(this.options.handleClass)>-1)){var b=this.getRelativePosition(a),c=this.$range[0].getBoundingClientRect().left,d=this.getPositionFromNode(this.$handle[0])-c;this.setPosition(b-this.grabX),b>=d&&b<d+this.handleWidth&&(this.grabX=b-d)}},h.prototype.handleMove=function(a){a.preventDefault();var b=this.getRelativePosition(a);this.setPosition(b-this.grabX)},h.prototype.handleEnd=function(a){a.preventDefault(),this.$document.off(this.moveEvent,this.handleMove),this.$document.off(this.endEvent,this.handleEnd),this.$element.trigger("change",{origin:this.identifier}),this.onSlideEnd&&"function"==typeof this.onSlideEnd&&this.onSlideEnd(this.position,this.value)},h.prototype.cap=function(a,b,c){return b>a?b:a>c?c:a},h.prototype.setPosition=function(a){var b,c;b=this.getValueFromPosition(this.cap(a,0,this.maxHandleX)),c=this.getPositionFromValue(b),this.$fill[0].style.width=c+this.grabX+"px",this.$handle[0].style.left=c+"px",this.setValue(b),this.position=c,this.value=b,this.onSlide&&"function"==typeof this.onSlide&&this.onSlide(c,b)},h.prototype.getPositionFromNode=function(a){for(var b=0;null!==a;)b+=a.offsetLeft,a=a.offsetParent;return b},h.prototype.getRelativePosition=function(a){var b=this.$range[0].getBoundingClientRect().left,c=0;return"undefined"!=typeof a.pageX?c=a.pageX:"undefined"!=typeof a.originalEvent.clientX?c=a.originalEvent.clientX:a.originalEvent.touches&&a.originalEvent.touches[0]&&"undefined"!=typeof a.originalEvent.touches[0].clientX?c=a.originalEvent.touches[0].clientX:a.currentPoint&&"undefined"!=typeof a.currentPoint.x&&(c=a.currentPoint.x),c-b},h.prototype.getPositionFromValue=function(a){var b,c;return b=(a-this.min)/(this.max-this.min),c=b*this.maxHandleX},h.prototype.getValueFromPosition=function(a){var b,c;return b=a/(this.maxHandleX||1),c=this.step*Math.round(b*(this.max-this.min)/this.step)+this.min,Number(c.toFixed(this.toFixed))},h.prototype.setValue=function(a){a!==this.value&&this.$element.val(a).trigger("input",{origin:this.identifier})},h.prototype.destroy=function(){this.$document.off("."+this.identifier),this.$window.off("."+this.identifier),this.$element.off("."+this.identifier).removeAttr("style").removeData("plugin_"+i),this.$range&&this.$range.length&&this.$range[0].parentNode.removeChild(this.$range[0])},a.fn[i]=function(b){var c=Array.prototype.slice.call(arguments,1);return this.each(function(){var d=a(this),e=d.data("plugin_"+i);e||d.data("plugin_"+i,e=new h(this,b)),"string"==typeof b&&e[b].apply(e,c)})}});
